{
    "pluginAlias": "AdvancedThermostat",
    "pluginType": "accessory",
    "singular": false,
    "schema": {
      "type": "object",
      "properties": {
        "name": {
          "title": "Name",
          "type": "string",
          "required": true
        },
        "interval": {
          "title": "Interval",
          "description": "Interval, in minutes",
          "type": "number",
          "default": 1,
          "required": true
        },
        "pid": {
          "title": "PID Control",
          "type": "object",
          "expandable": true,
          "expanded": false,
          "properties": {
            "cP": {
              "title": "P",
              "description": "Proportional coefficient",
              "type": "number",
              "default": 0.2,
              "required": true
            },
            "cI": {
              "title": "I",
              "description": "Integral coefficient",
              "type": "number",
              "default": 0.01,
              "required": true
            },
            "cD": {
              "title": "D",
              "description": "Differential coefficient",
              "type": "number",
              "default": 1,
              "required": true
            }
          }
        },
        "modulation": {
          "title": "Modulation",
          "type": "object",
          "expandable": true,
          "expanded": false,
          "properties": {
            "budgetThreshold": {
              "title": "Budget Threshold",
              "description": "The amount of heating/cooling budget in minutes required before turning on heating/cooling.",
              "type": "number",
              "default": 5,
              "required": true
            },
            "budgetFade": {
              "title": "Budget Fade",
              "description": "Factor by which the heating/cooling time budget is reduced each minute.",
              "type": "number",
              "default": 0.99,
              "required": false
            }
          }
        },
        "dataLog": {
          "title": "Data Logging",
          "type": "object",
          "expandable": true,
          "expanded": false,
          "properties": {
            "csv": {
              "title": "CSV",
              "type": "object",
              "expandable": true,
              "expanded": false,
              "properties": {
                "dir": {
                  "title": "Directory",
                  "description": "Directory where data is logged.",
                  "type": "string",
                  "required": false
                },
                "measurements": {
                  "type": "array",
                  "uniqueItems": true,
                  "items": {
                    "type": "string",
                    "enum": [ "pid", "budget" ]
                  }
                }
              }
            },
            "influx": {
              "title": "Influx DB",
              "type": "object",
              "expandable": true,
              "expanded": false,
              "properties": {
                "host": {
                  "type": "string"
                },
                "token": {
                  "type": "string"
                },
                "org": {
                  "type": "string"
                },
                "bucket": {
                  "type": "string"
                },
                "measurements": {
                  "type": "array",
                  "uniqueItems": true,
                  "items": {
                    "type": "string",
                    "enum": [
                      "thermostat-pid"
                    ]
                  }
                },
                "tags": {
                  "type": "array",
                  "expandable": true,
                  "expanded": false,
                  "items": {
                    "type": "object",
                    "title": "Tag",
                    "properties": {
                      "name": {
                        "type": "string",
                        "required": true
                      },
                      "value": {
                        "type": "string",
                        "required": true
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }